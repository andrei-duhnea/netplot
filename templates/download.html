<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="refresh" content="2; URL=/direct-download/{{ png_file }}">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <style>
        .vertical-center {
          min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
          min-height: 100vh; /* These two lines are counted as one :-)       */

          display: flex;
          align-items: center;
        }
        .container .jumbotron {
            border-radius: 6px;
        }
    </style>
  </head>
<body>
    <div class="jumbotron vertical-center">
    <div class="container">
        <div class="row">
          <p class="text-center">
           The PNG file download should start automatically.
           If it does not, please click <a href="/direct-download/{{ png_file }}" target="_blank">here</a> to start the download directly.
          </p>
        </div>
        <div class=row>
          <a href="/direct-download/{{ png_file }}" download="/direct-download/{{ png_file }}" title="Plot">
            <img src="/direct-download/{{ png_file }}" alt="Plot">
          </a>
        </div>
        <div class="row">
          <p class="text-center">
            In <span id="time"></span> seconds, you will be redirected to the main page, or you can <a href="/">go there now</a>.
          </p>
        </div>
    </div>
    </div>
    <script type="text/javascript" language="JavaScript">
    function Redirect() {
      window.location = "/";
    }

    function startTimer(duration, display) {
        var timer = duration, minutes, seconds;
        setInterval(function () {
            seconds = timer;

            seconds = seconds < 10 ? "0" + seconds : seconds;

            display.textContent = seconds;

            if (--timer < 0) {
                timer = duration;
            }
        }, 1000);
    }

    window.onload = function() {
      var timeout = 10,
          display = document.querySelector('#time');
      startTimer(timeout, display);
      setTimeout("Redirect()", timeout * 1000);
    }

    </script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  </body>
</html>
